<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en-US" xml:lang="en-US" xmlns="http://www.w3.org/1999/xhtml">

<!-- Mirrored from www.w3schools.com/xquery/xquery_functions.asp?output=print by HTTrack Website Copier/3.x [XR&CO'2010], Sat, 15 Oct 2011 23:16:38 GMT -->
<head>

<title>XQuery Functions</title>
 
<link rel="shortcut icon" href="../favicon.ico" type="image/x-icon" />
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<meta name="Keywords" content="html,css,tutorial,html5,dhtml,css3,xsl,xslt,xhtml,javascript,jquery,asp,ado,net,vbscript,dom,sql,colors,soap,php,rss,authoring,programming,training,learning,quiz,beginner's guide,primer,lessons,school,howto,reference,examples,samples,source code,tags,demos,tips,links,FAQ,tag list,forms,frames,color table,w3c,cascading style sheets,active server pages,dynamic html,internet,database,development,Web building,Webmaster,html guide" />

<meta name="Description" content="Free HTML XHTML CSS JavaScript jQuery XML DOM XSL XSLT RSS AJAX ASP .NET PHP SQL tutorials, references, examples for web building." />

<link rel="stylesheet" type="text/css" href="../stdtheme.css" />
<script type="text/javascript">
<!--
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
//-->
</script>
<script type="text/javascript">
<!--
function searchfield_focus(obj)
{
obj.style.color=""
obj.style.fontStyle=""
if (obj.value=="Search w3schools.com")
	{
	obj.value=""
	}
}

var pageTracker = _gat._getTracker("UA-3855518-1");
pageTracker._initData();
pageTracker._trackPageview();

var addr=document.location.href;
function displayError()
{
document.getElementById("err_url").value=addr;
document.getElementById("err_form").style.display="block";
document.getElementById("err_desc").focus();
hideSent();
}
function hideError()
{
document.getElementById("err_form").style.display="none";
}
function hideSent()
{
document.getElementById("err_sent").style.display="none";
}
function sendErr()
{
var xmlhttp;
var err_url=document.getElementById("err_url").value;
var err_email=document.getElementById("err_email").value;
var err_desc=document.getElementById("err_desc").value;
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }

xmlhttp.open("POST","../err_sup.html",true);
xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
xmlhttp.send("err_url=" + err_url + "&err_email=" + err_email + "&err_desc=" + escape(err_desc));
hideError();
document.getElementById("err_sent").style.display="block";
}

function click_expandingMenuHeader(obj,sectionName)
{
var x=document.getElementById("cssprop_" + sectionName).parentNode.className;
if (x.indexOf("expandingMenuNotSelected")>-1)
	{
	x=x.replace("expandingMenuNotSelected","expandingMenuSelected");
	document.getElementById("cssprop_" + sectionName).parentNode.className=x;
	document.getElementById("cssprop_" + sectionName).style.display="block";
	}
else
	{
	x=x.replace("expandingMenuSelected","expandingMenuNotSelected");
	document.getElementById("cssprop_" + sectionName).parentNode.className=x;
	document.getElementById("cssprop_" + sectionName).style.display="none";
	}
}

//-->
</script>
<!--[if lt IE 7]>
<style>
#leftcolumn{margin-left:0}
</style>
<![endif]-->
</head>
<body>

<p>From <b>http://www.w3schools.com</b> (Copyright Refsnes Data)</p>

<h1>XQuery <span class="color_h1">Functions</span></h1>
<div class="chapter">
<div class="prev"><a class="chapter" href="xquery_select.html">&laquo; Previous</a></div>
<div class="next"><a class="chapter" href="xquery_summary.html">Next Chapter &raquo;</a></div>
</div>
<hr />
<p class="intro">XQuery 1.0, XPath 2.0, and XSLT 2.0 share the same functions library.</p>
<hr />
<h2>XQuery Functions</h2>
<p>XQuery includes over 100 built-in functions. There are 
functions for string values, numeric values, date and time comparison, node and QName manipulation, sequence manipulation, Boolean 
values, and more. You can also define your own functions in XQuery.</p>
<hr />

<h2>XQuery Built-in Functions</h2>
<p>The URI of the XQuery function namespace is:<br />
http://www.w3.org/2005/02/xpath-functions</p>
<p>The default prefix for the function namespace is fn:.</p>
<p><b>Tip:</b> Functions are often called with the fn: prefix, such as fn:string(). 
However, since fn: is the default prefix of the namespace, the function names do 
not need to be prefixed when called.</p>
<p><a href="../xpath/xpath_functions.html">The reference of all the built-in XQuery 1.0 functions is located 
in our XPath tutorial</a>.</p>
<hr />

<h2>Examples of Function Calls</h2>
<p>A call to a function can appear where an expression may appear. Look at the examples below:</p>
<p>Example 1: In an element</p>

<table class="code notranslate" cellspacing="0" cellpadding="0" border="0" width="100%">
<tr><td>&lt;name&gt;{uppercase($booktitle)}&lt;/name&gt;</td></tr>
</table>

<p>Example 2: In the predicate of a path expression</p>
<table class="code notranslate" cellspacing="0" cellpadding="0" border="0" width="100%">
<tr><td>doc(&quot;books.xml&quot;)/bookstore/book[substring(title,1,5)='Harry']</td></tr>
</table>

<p>Example 3: In a let clause</p>
<table class="code notranslate" cellspacing="0" cellpadding="0" border="0" width="100%">
<tr><td>let $name := (substring($booktitle,1,4))</td></tr>
</table>
<br />
<hr />


<h2>XQuery User-Defined Functions</h2>
<p>If you cannot find the XQuery function you need, you can write your own.</p>
<p>User-defined functions can be defined in the query or in a separate library.</p>

<h3>Syntax</h3>
<table class="code notranslate" cellspacing="0" cellpadding="0" border="0" width="100%">
<tr><td>
declare function <i>prefix:function_name</i>($<i>parameter </i>AS<i> datatype</i>)<br />
AS <i>returnDatatype</i><br />
{<br />
&nbsp;...<i>function code here</i>...<br />
}</td></tr>
</table>
<p>Notes on user-defined functions: </p>
<ul>
	<li>Use the declare function keyword</li>
	<li>The name of the function must be prefixed</li>
	<li>The data type of the parameters are mostly the same as the data types 
	defined in XML Schema</li>
	<li>The body of the function must be surrounded by curly braces</li>
</ul>
<h3>Example of a User-defined Function Declared in the Query</h3>

<table class="code notranslate" cellspacing="0" cellpadding="0" border="0" width="100%">
<tr><td>
declare function local:minPrice($p as xs:decimal?,$d as xs:decimal?)<br />
  AS xs:decimal?<br />
{<br />
let $disc := ($p * $d) div 100<br />
return ($p - $disc)<br />
}<br /><br />
Below is an example of how to call the function above:<br /><br />
&lt;minPrice&gt;{local:minPrice($book/price,$book/discount)}&lt;/minPrice&gt;</td></tr>
</table>
<br />
<div class="chapter">
<div class="prev"><a class="chapter" href="xquery_select.html">&laquo; Previous</a></div>
<div class="next"><a class="chapter" href="xquery_summary.html">Next Chapter &raquo;</a></div>
</div>

<p>From <b>http://www.w3schools.com</b> (Copyright Refsnes Data)</p>

</body>

<!-- Mirrored from www.w3schools.com/xquery/xquery_functions.asp?output=print by HTTrack Website Copier/3.x [XR&CO'2010], Sat, 15 Oct 2011 23:16:38 GMT -->
</html>