<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en-US" xml:lang="en-US" xmlns="http://www.w3.org/1999/xhtml">

<!-- Mirrored from www.w3schools.com/ajax/ajax_xmlfile.asp?output=print by HTTrack Website Copier/3.x [XR&CO'2010], Sat, 15 Oct 2011 23:16:05 GMT -->
<head>

<title>AJAX XML</title>
 
<link rel="shortcut icon" href="../favicon.ico" type="image/x-icon" />
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<meta name="Keywords" content="html,css,tutorial,html5,dhtml,css3,xsl,xslt,xhtml,javascript,jquery,asp,ado,net,vbscript,dom,sql,colors,soap,php,rss,authoring,programming,training,learning,quiz,beginner's guide,primer,lessons,school,howto,reference,examples,samples,source code,tags,demos,tips,links,FAQ,tag list,forms,frames,color table,w3c,cascading style sheets,active server pages,dynamic html,internet,database,development,Web building,Webmaster,html guide" />

<meta name="Description" content="Free HTML XHTML CSS JavaScript jQuery XML DOM XSL XSLT RSS AJAX ASP .NET PHP SQL tutorials, references, examples for web building." />

<link rel="stylesheet" type="text/css" href="../stdtheme.css" />
<script type="text/javascript">
<!--
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
//-->
</script>
<script type="text/javascript">
<!--
function searchfield_focus(obj)
{
obj.style.color=""
obj.style.fontStyle=""
if (obj.value=="Search w3schools.com")
	{
	obj.value=""
	}
}

var pageTracker = _gat._getTracker("UA-3855518-1");
pageTracker._initData();
pageTracker._trackPageview();

var addr=document.location.href;
function displayError()
{
document.getElementById("err_url").value=addr;
document.getElementById("err_form").style.display="block";
document.getElementById("err_desc").focus();
hideSent();
}
function hideError()
{
document.getElementById("err_form").style.display="none";
}
function hideSent()
{
document.getElementById("err_sent").style.display="none";
}
function sendErr()
{
var xmlhttp;
var err_url=document.getElementById("err_url").value;
var err_email=document.getElementById("err_email").value;
var err_desc=document.getElementById("err_desc").value;
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }

xmlhttp.open("POST","../err_sup.html",true);
xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
xmlhttp.send("err_url=" + err_url + "&err_email=" + err_email + "&err_desc=" + escape(err_desc));
hideError();
document.getElementById("err_sent").style.display="block";
}

function click_expandingMenuHeader(obj,sectionName)
{
var x=document.getElementById("cssprop_" + sectionName).parentNode.className;
if (x.indexOf("expandingMenuNotSelected")>-1)
	{
	x=x.replace("expandingMenuNotSelected","expandingMenuSelected");
	document.getElementById("cssprop_" + sectionName).parentNode.className=x;
	document.getElementById("cssprop_" + sectionName).style.display="block";
	}
else
	{
	x=x.replace("expandingMenuSelected","expandingMenuNotSelected");
	document.getElementById("cssprop_" + sectionName).parentNode.className=x;
	document.getElementById("cssprop_" + sectionName).style.display="none";
	}
}

//-->
</script>
<!--[if lt IE 7]>
<style>
#leftcolumn{margin-left:0}
</style>
<![endif]-->
<script type="text/javascript">
function loadXMLDoc(url)
{
var xmlhttp;
var txt,xx,x,i;
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    txt="<table border='1'><tr><th>Title</th><th>Artist</th></tr>";
    x=xmlhttp.responseXML.documentElement.getElementsByTagName("CD");
    for (i=0;i<x.length;i++)
      {
      txt=txt + "<tr>";
      xx=x[i].getElementsByTagName("TITLE");
        {
        try
          {
          txt=txt + "<td>" + xx[0].firstChild.nodeValue + "</td>";
          }
        catch (er)
          {
          txt=txt + "<td> </td>";
          }
        }
      xx=x[i].getElementsByTagName("ARTIST");
        {
        try
          {
          txt=txt + "<td>" + xx[0].firstChild.nodeValue + "</td>";
          }
        catch (er)
          {
          txt=txt + "<td> </td>";
          }
        }
      txt=txt + "</tr>";
      }
    txt=txt + "</table>";
    document.getElementById('txtCDInfo').innerHTML=txt;
    }
  }
xmlhttp.open("GET",url,true);
xmlhttp.send();
}
</script>
</head>
<body>

<p>From <b>http://www.w3schools.com</b> (Copyright Refsnes Data)</p>

<h1>AJAX <span class="color_h1">XML Example</span></h1>
<div class="chapter">
<div class="prev"><a class="chapter" href="ajax_database.html">&laquo; Previous</a></div>
<div class="next"><a class="chapter" href="ajax_examples.html">Next Chapter &raquo;</a></div>
</div>
<hr />
<p class="intro">AJAX can be used for interactive communication with an XML file.</p>
<hr />
<h2>AJAX XML Example</h2>
<p>The following example will demonstrate how a web page can fetch information 
from an XML file with AJAX:</p>

<table class="example" cellspacing="0" cellpadding="0" border="0" width="100%">
<tr><td>
<h2 class="example">Example</h2>
<table cellspacing="0" cellpadding="3" border="0" width="100%" style="border:1px solid #d4d4d4;background:white">
<tr><td>
<div id="txtCDInfo">
<button onclick="loadXMLDoc('cd_catalog.xml')">Get CD info</button>
</div>
</td></tr></table>
<br />
<a target="_blank" href="tryit0841.html?filename=tryajax_xml2" class="tryitbtn">Try it yourself &raquo;</a>
</td></tr>
</table>
<br />
<hr />

<h2>Example Explained - The stateChange() Function</h2>
<p>When a user clicks on the &quot;Get CD info&quot; button above, the loadXMLDoc() 
function is executed.</p>
<p>The loadXMLDoc() function creates an XMLHttpRequest object, adds the function 
to be executed when the server response is ready, and sends the request off to the server.</p>
<p>When the server response is ready, an HTML 
table is built, nodes (elements) are extracted from the XML file, and it finally updates the txtCDInfo 
placeholder with the HTML table filled with XML data:</p> 

<table class="code notranslate" cellspacing="0" cellpadding="0" border="0" width="100%">
<tr><td>
function loadXMLDoc(url)<br />
{<br />
var xmlhttp;<br />
var txt,xx,x,i;<br />
if (window.XMLHttpRequest)<br />
&nbsp; {// code for IE7+, Firefox, Chrome, Opera, Safari<br />
&nbsp; xmlhttp=new XMLHttpRequest();<br />
&nbsp; }<br />
else<br />
&nbsp; {// code for IE6, IE5<br />
&nbsp; xmlhttp=new ActiveXObject(&quot;Microsoft.XMLHTTP&quot;);<br />
&nbsp; }<br />
xmlhttp.onreadystatechange=function()<br />
&nbsp; {<br />
&nbsp; if (xmlhttp.readyState==4 &amp;&amp; xmlhttp.status==200)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp;&nbsp; txt=&quot;&lt;table border='1'&gt;&lt;tr&gt;&lt;th&gt;Title&lt;/th&gt;&lt;th&gt;Artist&lt;/th&gt;&lt;/tr&gt;&quot;;<br />
&nbsp;&nbsp;&nbsp; x=xmlhttp.responseXML.documentElement.getElementsByTagName(&quot;CD&quot;);<br />
&nbsp;&nbsp;&nbsp; for (i=0;i&lt;x.length;i++)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; txt=txt + &quot;&lt;tr&gt;&quot;;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; xx=x[i].getElementsByTagName(&quot;TITLE&quot;);<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; try<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; txt=txt + &quot;&lt;td&gt;&quot; + 
xx[0].firstChild.nodeValue + &quot;&lt;/td&gt;&quot;;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; catch (er)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; txt=txt + &quot;&lt;td&gt;&amp;nbsp;&lt;/td&gt;&quot;;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; xx=x[i].getElementsByTagName(&quot;ARTIST&quot;);<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; try<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; txt=txt + &quot;&lt;td&gt;&quot; + 
xx[0].firstChild.nodeValue + &quot;&lt;/td&gt;&quot;;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; catch (er)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; txt=txt + &quot;&lt;td&gt;&amp;nbsp;&lt;/td&gt;&quot;;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; txt=txt + &quot;&lt;/tr&gt;&quot;;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; txt=txt + &quot;&lt;/table&gt;&quot;;<br />
&nbsp;&nbsp;&nbsp; document.getElementById('txtCDInfo').innerHTML=txt;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp; }<br />
xmlhttp.open(&quot;GET&quot;,url,true);<br />
xmlhttp.send();<br />
}</td></tr></table>
<br />
<hr />

<h2>The AJAX Server Page</h2>
<p>The page on the server used in the example above, is an XML file called &quot;<a target="_blank" href="cd_catalog.xml">cd_catalog.xml</a>&quot;.</p>

<br />
<div class="chapter">
<div class="prev"><a class="chapter" href="ajax_database.html">&laquo; Previous</a></div>
<div class="next"><a class="chapter" href="ajax_examples.html">Next Chapter &raquo;</a></div>
</div>

<p>From <b>http://www.w3schools.com</b> (Copyright Refsnes Data)</p>

</body>

<!-- Mirrored from www.w3schools.com/ajax/ajax_xmlfile.asp?output=print by HTTrack Website Copier/3.x [XR&CO'2010], Sat, 15 Oct 2011 23:16:05 GMT -->
</html>