<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en-US" xml:lang="en-US" xmlns="http://www.w3.org/1999/xhtml">

<!-- Mirrored from www.w3schools.com/dom/dom_httprequest.asp?output=print by HTTrack Website Copier/3.x [XR&CO'2010], Sat, 15 Oct 2011 23:16:22 GMT -->
<head>

<title>XML DOM - HttpRequest object</title>
 
<link rel="shortcut icon" href="../favicon.ico" type="image/x-icon" />
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<meta name="Keywords" content="html,css,tutorial,html5,dhtml,css3,xsl,xslt,xhtml,javascript,jquery,asp,ado,net,vbscript,dom,sql,colors,soap,php,rss,authoring,programming,training,learning,quiz,beginner's guide,primer,lessons,school,howto,reference,examples,samples,source code,tags,demos,tips,links,FAQ,tag list,forms,frames,color table,w3c,cascading style sheets,active server pages,dynamic html,internet,database,development,Web building,Webmaster,html guide" />

<meta name="Description" content="Free HTML XHTML CSS JavaScript jQuery XML DOM XSL XSLT RSS AJAX ASP .NET PHP SQL tutorials, references, examples for web building." />

<link rel="stylesheet" type="text/css" href="../stdtheme.css" />
<script type="text/javascript">
<!--
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
//-->
</script>
<script type="text/javascript">
<!--
function searchfield_focus(obj)
{
obj.style.color=""
obj.style.fontStyle=""
if (obj.value=="Search w3schools.com")
	{
	obj.value=""
	}
}

var pageTracker = _gat._getTracker("UA-3855518-1");
pageTracker._initData();
pageTracker._trackPageview();

var addr=document.location.href;
function displayError()
{
document.getElementById("err_url").value=addr;
document.getElementById("err_form").style.display="block";
document.getElementById("err_desc").focus();
hideSent();
}
function hideError()
{
document.getElementById("err_form").style.display="none";
}
function hideSent()
{
document.getElementById("err_sent").style.display="none";
}
function sendErr()
{
var xmlhttp;
var err_url=document.getElementById("err_url").value;
var err_email=document.getElementById("err_email").value;
var err_desc=document.getElementById("err_desc").value;
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }

xmlhttp.open("POST","../err_sup.html",true);
xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
xmlhttp.send("err_url=" + err_url + "&err_email=" + err_email + "&err_desc=" + escape(err_desc));
hideError();
document.getElementById("err_sent").style.display="block";
}

function click_expandingMenuHeader(obj,sectionName)
{
var x=document.getElementById("cssprop_" + sectionName).parentNode.className;
if (x.indexOf("expandingMenuNotSelected")>-1)
	{
	x=x.replace("expandingMenuNotSelected","expandingMenuSelected");
	document.getElementById("cssprop_" + sectionName).parentNode.className=x;
	document.getElementById("cssprop_" + sectionName).style.display="block";
	}
else
	{
	x=x.replace("expandingMenuSelected","expandingMenuNotSelected");
	document.getElementById("cssprop_" + sectionName).parentNode.className=x;
	document.getElementById("cssprop_" + sectionName).style.display="none";
	}
}

//-->
</script>
<!--[if lt IE 7]>
<style>
#leftcolumn{margin-left:0}
</style>
<![endif]-->
</head>
<body>

<p>From <b>http://www.w3schools.com</b> (Copyright Refsnes Data)</p>

<h1>The <span class="color_h1">XMLHttpRequest</span> Object</h1>
<div class="chapter">
<div class="prev"><a class="chapter" href="dom_nodes_clone.html">&laquo; Previous</a></div>
<div class="next"><a class="chapter" href="dom_nodetype.html">Next Chapter &raquo;</a></div>
</div>
<hr />
<p class="intro">With the XMLHttpRequest object you can update parts of a web 
page, without reloading the whole page.</p>
<hr />

<h2>The XMLHttpRequest Object</h2>
<p>The XMLHttpRequest object is used to exchange data with a server behind the 
scenes.</p>
<p>The XMLHttpRequest object is <b>the developers dream</b>, because you can:</p>
<ul>
	<li>Update a web page without reloading the page</li>
	<li>Request data from a server after the page has loaded </li>
	<li>Receive data from a server after the page has loaded</li>
	<li>Send data to a server in the background</li>
</ul>
<hr />

<h2>Create an XMLHttpRequest Object</h2>
<p>All modern browsers (IE7+, Firefox, Chrome, Safari, and Opera) have a built-in XMLHttpRequest object.</p>
<p>Syntax for creating an XMLHttpRequest object:</p>
<table class="code notranslate" cellspacing="0" cellpadding="0" border="0" width="100%" id="table2">
<tr><td>xmlhttp=new XMLHttpRequest();</td></tr></table>
<p>Old versions of Internet Explorer (IE5 and IE6) uses an ActiveX Object:</p>
<table class="code notranslate" cellspacing="0" cellpadding="0" border="0" width="100%" id="table3">
<tr><td>xmlhttp=new ActiveXObject(&quot;Microsoft.XMLHTTP&quot;);</td></tr></table>
<p>To handle all modern browsers, including IE5 and IE6,  
check if the browser supports the XMLHttpRequest object. If it does, create an 
XMLHttpRequest object, if not, create an ActiveXObject:</p>

<table class="example" border="0" cellpadding="0" cellspacing="0" width="100%" id="table12"><tr><td>
<h2 class="example">Example</h2>
<table class="example_code notranslate" border="0" cellpadding="0" cellspacing="0" width="100%" id="table13"><tr><td>
if (window.XMLHttpRequest)<br />
&nbsp; {// code for IE7+, Firefox, Chrome, Opera, Safari<br />
&nbsp; xmlhttp=new XMLHttpRequest();<br />
&nbsp; }<br />
else<br />
&nbsp; {// code for IE6, IE5<br />
&nbsp; xmlhttp=new ActiveXObject(&quot;Microsoft.XMLHTTP&quot;);<br />
&nbsp; }</td></tr></table>
<br />
<a target="_blank" class="tryitbtn" href="http://www.w3schools.com/dom/tryit.asp?filename=try_dom_xmlhttprequest_first">Try it yourself &raquo;</a>
</td></tr></table>
<br />
<hr />

<h2>Send a Request To a Server</h2>
<p>To send a request to a server, we use the open() and send() methods of the XMLHttpRequest object:</p>
<table class="code notranslate" cellspacing="0" cellpadding="0" border="0" width="100%" id="table14">
<tr><td>xmlhttp.open(&quot;GET&quot;,&quot;xmlhttp_info.txt&quot;,true);<br />
xmlhttp.send();</td></tr></table>
<br />

<table class="reference"> 
  <tr>
    <th align="left" width="30%">Method</th>
    <th align="left" width="70%">Description</th>
  </tr>  
  <tr>
    <td>open(<i>method,url,async</i>)</td>
    <td>Specifies the type of request, the URL, and if the request should be handled asynchronously or not.<br /><br />
	<i>method</i>: the type of request: GET or POST<br />
	<i>url</i>: the location of the file on the server<br />
	<i>async</i>: true (asynchronous) or false (synchronous)</td>
  </tr>
  <tr>
    <td>send(<i>string</i>)</td>
    <td>Sends the request off to the server.<br /><br />
    <i>string</i>: Only used for POST requests</td>
  </tr>
	</table>
<br />
<hr />

<h2>GET or POST?</h2>
<p>GET is simpler and faster than POST, and can be used in most cases.</p>
<p>However, always use POST requests when:</p>
<ul>
	<li>A cached file is not an option (update a file or database on the server)</li>
	<li>Sending a large amount of data to the server (POST has no size 
	limitations)</li>
	<li>Sending user input (which can contain unknown characters), POST is more 
	robust and secure than GET</li>
</ul>

<hr />

<h2>The url - A File On a Server</h2>
<p>The url parameter of the open() method, is an address to a file on a server:</p>
<table class="code notranslate" cellspacing="0" cellpadding="0" border="0" width="100%" id="table16">
<tr><td>xmlhttp.open(&quot;GET&quot;,&quot;xmlhttp_info.txt&quot;,true);</td></tr></table>
<p>The file can be any kind of file, like .txt and 
.xml, or server scripting files like .asp and .php (which can perform  
actions on the server before sending the response back).</p>
<hr />

<h2>Asynchronous - True or False?</h2>
<p>To send the request asynchronously, the async parameter of the open() 
method has to be set to true:</p>

<table class="code notranslate" cellspacing="0" cellpadding="0" border="0" width="100%" id="table17">
<tr><td>xmlhttp.open(&quot;GET&quot;,&quot;xmlhttp_info.txt&quot;,true);</td></tr></table>

<p>Sending asynchronously requests is a huge improvement for web developers. Many of the tasks  
performed on the server are very time consuming.</p>
<p>By sending asynchronously, the 
JavaScript does not have to wait for the server response, but can instead:</p>
<ul>
	<li>execute other scripts while waiting for server response</li>
	<li>deal with the response when the response ready</li>
</ul>
<hr />

<h2>Async=true</h2>

<p>When using async=true, specify a function to execute when the response is ready in the onreadystatechange event:</p>

<table class="example" border="0" cellpadding="0" cellspacing="0" width="100%" id="table18"><tr><td>
<h2 class="example">Example</h2>
<table class="example_code notranslate" border="0" cellpadding="0" cellspacing="0" width="100%" id="table19"><tr><td>
xmlhttp.onreadystatechange=function()<br />
&nbsp; {<br />
&nbsp; if (xmlhttp.readyState==4 &amp;&amp; xmlhttp.status==200)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp;&nbsp; document.getElementById(&quot;myDiv&quot;).innerHTML=xmlhttp.responseText;<br>
&nbsp;&nbsp;&nbsp; }<br />
&nbsp; }<br />
xmlhttp.open(&quot;GET&quot;,&quot;xmlhttp_info.txt&quot;,true);<br />
xmlhttp.send();</td></tr></table>
<br />
<a target="_blank" class="tryitbtn" href="http://www.w3schools.com/dom/tryit.asp?filename=try_dom_xmlhttprequest_first">Try it yourself &raquo;</a>
</td></tr></table>
<br />
<hr />

<h2>Async=false</h2>
<p>To use async=false, change the third parameter in the open() method to false:</p>

<table class="code notranslate" cellspacing="0" cellpadding="0" border="0" width="100%" id="table20">
<tr><td>xmlhttp.open(&quot;GET&quot;,&quot;xmlhttp_info.txt&quot;,false);</td></tr></table>

<p>Using async=false is not recommended, but for a few small requests this can be ok.</p>
<p>Remember that the JavaScript will NOT continue to execute, 
until the server response is ready. If the server is busy or slow, the 
application will hang or stop.</p>
<p><b>Note:</b> When you use async=false, do NOT write an onreadystatechange 
function - just put the code after the send() statement:</p>

<table class="example" border="0" cellpadding="0" cellspacing="0" width="100%" id="table21"><tr><td>
<h2 class="example">Example</h2>
<table class="example_code notranslate" border="0" cellpadding="0" cellspacing="0" width="100%" id="table22"><tr><td>
	xmlhttp.open(&quot;GET&quot;,&quot;xmlhttp_info.txt&quot;,false);<br />
	xmlhttp.send();<br />
	document.getElementById(&quot;myDiv&quot;).innerHTML=xmlhttp.responseText;</td></tr></table>
<br />
<a target="_blank" class="tryitbtn" href="http://www.w3schools.com/dom/tryit.asp?filename=try_dom_xmlhttprequest_asyncfalse">Try it yourself &raquo;</a>
</td></tr></table>
<br />

<hr />
<h2>Server Response</h2>
<p>To get the response from a server, use the responseText or responseXML property 
of the XMLHttpRequest object.</p>
<table class="reference"> 
  <tr>
    <th align="left" width="20%">Property</th>
    <th align="left" width="80%">Description</th>
  </tr>  
  <tr>
    <td>responseText</td>
    <td>get the response data as a string</td>
  </tr>
  <tr>
    <td>responseXML</td>
    <td>get the response data as XML data</td>
  </tr>
</table>

<br />
<hr />
<h2>The responseText Property</h2>
<p>If the response from the server is not XML, use the responseText property.</p>
<p>The responseText property returns the response as a string, and you can use it accordingly:</p>

<table class="example" border="0" cellpadding="0" cellspacing="0" width="100%" id="table26"><tr><td>
<h2 class="example">Example</h2>
<table class="example_code notranslate" border="0" cellpadding="0" cellspacing="0" width="100%" id="table27"><tr><td>
	document.getElementById(&quot;myDiv&quot;).innerHTML=xmlhttp.responseText;</td></tr></table>
<br />
<a target="_blank" class="tryitbtn" href="http://www.w3schools.com/dom/tryit.asp?filename=try_dom_xmlhttprequest_first">Try it yourself &raquo;</a>
</td></tr></table>
<br />
<hr />
<h2>The responseXML Property</h2>
<p>If the response from the server is XML, and you want to parse it as 
an XML object, use the responseXML property:</p>

<table class="example" border="0" cellpadding="0" cellspacing="0" width="100%" id="table28"><tr><td>
<h2 class="example">Example</h2>
<p>Request the file <a target="_blank" href="cd_catalog.xml">cd_catalog.xml</a> and parse the response:</p>
<table class="example_code notranslate" border="0" cellpadding="0" cellspacing="0" width="100%" id="table29"><tr><td>
xmlDoc=xmlhttp.responseXML;<br />
var txt=&quot;&quot;;<br />
x=xmlDoc.getElementsByTagName(&quot;ARTIST&quot;);<br />
for (i=0;i&lt;x.length;i++)<br />
&nbsp; {<br />
&nbsp; txt=txt + x[i].childNodes[0].nodeValue + &quot;&lt;br /&gt;&quot;;<br />
&nbsp; }<br />
document.getElementById(&quot;myDiv&quot;).innerHTML=txt;</td></tr></table>
<br />
<a target="_blank" class="tryitbtn" href="http://www.w3schools.com/dom/tryit.asp?filename=try_dom_xmlhttprequest_responsexml">Try it yourself &raquo;</a>
</td></tr></table>

<br />

<hr />

<h2>The onreadystatechange event</h2>
<p>When a request to a server is sent, we want to perform some actions based 
on the response.</p>
<p>The onreadystatechange event is triggered every time the readyState changes.</p>
<p>The readyState property holds the status of the XMLHttpRequest.</p>
<p>Three important properties of the XMLHttpRequest object:</p>
<table class="reference"> 
  <tr>
    <th align="left" width="20%">Property</th>
    <th align="left" width="80%">Description</th>
  </tr>  
  <tr>
    <td>onreadystatechange</td>
    <td>Stores a function (or the name of a function) to be called automatically 
	each time the readyState property changes</td>
  </tr>
  <tr>
    <td>readyState</td>
    <td>Holds the status of the XMLHttpRequest. Changes from 0 to 4: <br />
	0: request not initialized <br />
	1: server connection established<br />
	2: request received <br />
	3: processing request <br />
	4: request finished and response is ready</td>
  </tr>
  <tr>
    <td>status</td>
    <td>200: &quot;OK&quot;<br />
	404: Page not found</td>
  </tr>
</table>

<p>In the onreadystatechange event, we specify what will happen when the server 
response is ready to be processed.</p>
<p>When readyState is 4 and status is 200, the response is ready:</p>

<table class="example" border="0" cellpadding="0" cellspacing="0" width="100%" id="table31"><tr><td>
<h2 class="example">Example</h2>
<table class="example_code notranslate" border="0" cellpadding="0" cellspacing="0" width="100%" id="table32"><tr><td>
xmlhttp.onreadystatechange=function()<br />
&nbsp;
{<br />
&nbsp; if (xmlhttp.readyState==4 &amp;&amp; xmlhttp.status==200)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp;&nbsp; document.getElementById(&quot;myDiv&quot;).innerHTML=xmlhttp.responseText;<br>
&nbsp;&nbsp;&nbsp; }<br />
&nbsp; }
</td></tr></table>
<br />
<a target="_blank" class="tryitbtn" href="http://www.w3schools.com/dom/tryit.asp?filename=try_dom_xmlhttprequest_first">Try it yourself &raquo;</a>
</td></tr></table>
<p><b>Note:</b> The onreadystatechange event is triggered four times, one time for each change in readyState.</p>
<hr />


<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td align="left" width="48"><img border="0" src="http://www.w3schools.com/images/tryitimg.gif" width="40" height="46" alt="Examples" /></td>
<td align="left" valign="middle"><h2>Try it Yourself - More Examples</h2></td>
</tr>
</table>

<p>
<a target="_blank" href="http://www.w3schools.com/dom/tryit.asp?filename=try_dom_xmlhttprequest_header">
Retrieve header information with getAllResponseHeaders()</a><br />
Retrieve header information of a resource (file).
</p>

<p>
<a target="_blank" href="http://www.w3schools.com/dom/tryit.asp?filename=try_dom_xmlhttprequest_lastmodified">
Retrieve specific header information with getResponseHeader()</a><br />
Retrieve specific header information of a resource (file).
</p>

<p>
<a target="_blank" href="http://www.w3schools.com/dom/tryit.asp?filename=try_dom_xmlhttprequest_suggest">Retrieve the content of an ASP file</a><br />
How a web page can communicate with a web server while a user type characters in an input field.
</p>

<p>
<a target="_blank" href="http://www.w3schools.com/dom/tryit.asp?filename=try_dom_xmlhttprequest_database">Retrieve content from a database</a><br />
How a web page can fetch information from a database with the XMLHttpRequest 
object.
</p>

<p>
<a target="_blank" href="http://www.w3schools.com/dom/tryit.asp?filename=try_dom_xmlhttprequest_xml">Retrieve the content of an XML file</a><br />
Create an XMLHttpRequest to retrieve data from an XML file and display the data in an HTML table.
</p>

<br />
<div class="chapter">
<div class="prev"><a class="chapter" href="dom_nodes_clone.html">&laquo; Previous</a></div>
<div class="next"><a class="chapter" href="dom_nodetype.html">Next Chapter &raquo;</a></div>
</div>

<p>From <b>http://www.w3schools.com</b> (Copyright Refsnes Data)</p>

</body>

<!-- Mirrored from www.w3schools.com/dom/dom_httprequest.asp?output=print by HTTrack Website Copier/3.x [XR&CO'2010], Sat, 15 Oct 2011 23:16:22 GMT -->
</html>