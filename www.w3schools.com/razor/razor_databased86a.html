<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en-US" xml:lang="en-US" xmlns="http://www.w3.org/1999/xhtml">

<!-- Mirrored from www.w3schools.com/razor/razor_database.asp?output=print by HTTrack Website Copier/3.x [XR&CO'2010], Sat, 15 Oct 2011 23:33:28 GMT -->
<head>

<title>ASP.NET Razor Database</title>
 
<link rel="shortcut icon" href="../favicon.ico" type="image/x-icon" />
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<meta name="Keywords" content="html,css,tutorial,html5,dhtml,css3,xsl,xslt,xhtml,javascript,jquery,asp,ado,net,vbscript,dom,sql,colors,soap,php,rss,authoring,programming,training,learning,quiz,beginner's guide,primer,lessons,school,howto,reference,examples,samples,source code,tags,demos,tips,links,FAQ,tag list,forms,frames,color table,w3c,cascading style sheets,active server pages,dynamic html,internet,database,development,Web building,Webmaster,html guide" />

<meta name="Description" content="Free HTML XHTML CSS JavaScript jQuery XML DOM XSL XSLT RSS AJAX ASP .NET PHP SQL tutorials, references, examples for web building." />

<link rel="stylesheet" type="text/css" href="../stdtheme.css" />
<script type="text/javascript">
<!--
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
//-->
</script>
<script type="text/javascript">
<!--
function searchfield_focus(obj)
{
obj.style.color=""
obj.style.fontStyle=""
if (obj.value=="Search w3schools.com")
	{
	obj.value=""
	}
}

var pageTracker = _gat._getTracker("UA-3855518-1");
pageTracker._initData();
pageTracker._trackPageview();

var addr=document.location.href;
function displayError()
{
document.getElementById("err_url").value=addr;
document.getElementById("err_form").style.display="block";
document.getElementById("err_desc").focus();
hideSent();
}
function hideError()
{
document.getElementById("err_form").style.display="none";
}
function hideSent()
{
document.getElementById("err_sent").style.display="none";
}
function sendErr()
{
var xmlhttp;
var err_url=document.getElementById("err_url").value;
var err_email=document.getElementById("err_email").value;
var err_desc=document.getElementById("err_desc").value;
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }

xmlhttp.open("POST","../err_sup.html",true);
xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
xmlhttp.send("err_url=" + err_url + "&err_email=" + err_email + "&err_desc=" + escape(err_desc));
hideError();
document.getElementById("err_sent").style.display="block";
}

function click_expandingMenuHeader(obj,sectionName)
{
var x=document.getElementById("cssprop_" + sectionName).parentNode.className;
if (x.indexOf("expandingMenuNotSelected")>-1)
	{
	x=x.replace("expandingMenuNotSelected","expandingMenuSelected");
	document.getElementById("cssprop_" + sectionName).parentNode.className=x;
	document.getElementById("cssprop_" + sectionName).style.display="block";
	}
else
	{
	x=x.replace("expandingMenuSelected","expandingMenuNotSelected");
	document.getElementById("cssprop_" + sectionName).parentNode.className=x;
	document.getElementById("cssprop_" + sectionName).style.display="none";
	}
}

//-->
</script>
<!--[if lt IE 7]>
<style>
#leftcolumn{margin-left:0}
</style>
<![endif]-->
</head>
<body>

<p>From <b>http://www.w3schools.com</b> (Copyright Refsnes Data)</p>

<h1>ASP.NET Razor <span class="color_h1">- Databases</span></h1>
<div class="chapter">
<div class="prev"><a class="chapter" href="razor_helpers.html">&laquo; Previous</a></div>
<div class="next"><a class="chapter" href="razor_webgrid.html">Next Chapter &raquo;</a></div>
</div>
<hr />

<p class="intro">With Razor, you can easily display data from a database in your web pages.</p>
<hr />

<table class="example" border="0" cellpadding="0" cellspacing="0" width="100%"><tr><td>
<h2 class="example">Razor Example</h2>
<table class="example_code notranslate" border="0" cellpadding="0" cellspacing="0" width="100%"><tr><td>
<span class="marked">@{<br />
var db = Database.Open(&quot;SmallBakery&quot;);&nbsp;<br />
var selectQueryString = &quot;SELECT * FROM Product ORDER BY Name&quot;;&nbsp;<br />
}</span><br />
&lt;html&gt;&nbsp;<br />
&lt;body&gt;&nbsp;<br />
&lt;h1&gt;Small Bakery Products&lt;/h1&gt;&nbsp;<br />
&lt;table&gt;&nbsp;<br />
&lt;tr&gt;<br />
&lt;th&gt;Id&lt;/th&gt;&nbsp;<br />
&lt;th&gt;Product&lt;/th&gt;&nbsp;<br />
&lt;th&gt;Description&lt;/th&gt;&nbsp;<br />
&lt;th&gt;Price&lt;/th&gt;&nbsp;<br />
&lt;/tr&gt;<br />
<span class="marked">@foreach(var row in db.Query(selectQueryString))<br />
{</span><br />
&lt;tr&gt;&nbsp;<br />
&lt;td&gt;<span class="marked">@row.Id</span>&lt;/td&gt;&nbsp;<br />
&lt;td&gt;<span class="marked">@row.Name</span>&lt;/td&gt;&nbsp;<br />
&lt;td&gt;<span class="marked">@row.Description</span>&lt;/td&gt;&nbsp;<br />
&lt;td aligh=&quot;right&quot;&gt;<span class="marked">@row.Price</span>&lt;/td&gt;&nbsp;<br />
&lt;/tr&gt;&nbsp;<br />
<span class="marked">}</span><br />
&lt;/table&gt;&nbsp;<br />
&lt;/body&gt;&nbsp;<br />
&lt;/html&gt;</td></tr></table>
<br />
<a target="_blank" class="showbtn" href="showfile_cf46e.html?filename=try_razor_3">Run example &raquo;</a>
</td></tr></table>
<br />
<hr />

<h2>Creating a Test Database</h2>
<p>You can create a database using programming code, but it is more typical (and 
easier) to use a design tool.</p>
<p>An SQL Server Compact Database design tool is included in WebMatrix.</p>
<p>Follow the instructions below to create an SQL database called &quot;SmallBakery&quot;</p>

<p>1. Create a new web site (In WebMatrix click &quot;Site From Template&quot;), and call 
the site &quot;SmallBakery&quot;</p>
<p>2. Create a new database (open the Databases workspace and click New 
Database). </p>
<p>3. WebMatrix will create a database with the same name as your site: &quot;SmallBakery.sdf&quot;.</p>
<p>4. Create a new table in the database (open the SmallBakery.sdf node and 
click New Table).</p>
<p>WebMatrix opens the table designer:</p>
<p><img border="0" src="01.jpg" alt="screenshot" /></p>
<p>5. Create a new column called &quot;Id&quot;. Set Is Identity and Is Primary Key to 
true.</p>
<p>Is Primary Key tells the database that this will be the table's primary key. 
Is Identity tells the database to automatically create an ID number for every 
new record and to assign it the next sequential number (starting at 1).</p>
<p>6. Create a column called &quot;Name&quot;. Set Allows Null to &quot;False&quot; and Data Type to 
&quot;nvarchar&quot;.</p>
<p>7. Create a column called &quot;Description&quot;. Set Allows Null to &quot;False&quot; and Data 
Type to &quot;nvarchar&quot;.</p>
<p>8. Create a column named &quot;Price&quot;. Set Allow Nulls to &quot;False&quot; and set Data 
Type to &quot;money&quot;.</p>
<p>9. Save the table and name it &quot;Product&quot;.</p>
<p>When you are finished, your table definition will look like this:</p>
<p><img border="0" src="02.jpg" alt="screenshot" /></p>
<p><b>Notes:</b></p>
<p>Allow Nulls = &quot;False&quot; specifies that the column cannot be blank (empty). 
</p>
<p>Data 
Type = &quot;nvarchar&quot; specifies that this column will be a string of variable 
length.<br>
(The n prefix indicates that the column can hold national Unicode data)</p>
<hr />

<h2>Adding Data to the Database</h2>
<p>Follow the instructions below to add some data to your:</p>
<p>1. In the left pane, expand the SmallBakery.sdf node and then click Tables.</p>
<p>2. Right-click the Product table and then click Data.</p>
<p>3. In the edit pane, enter the following records:</p>

<table class="reference">

<tr>
<th>Name</th>
<th>Description</th>
<th>Price</th>
</tr>

<tr>
<td>Bread</td>
<td>Baked fresh every day</td>
<td>2.99</td>
</tr>

<tr>
<td>Strawberry Cake</td>
<td>Made with organic strawberries</td>
<td>9.99</td>
</tr>

<tr>
<td>Apple Pie</td>
<td>Second only to your mom's pie</td>
<td>12.99</td>
</tr>

<tr>
<td>Pecan Pie</td>
<td>If you like pecans, this is for you</td>
<td>10.99</td>
</tr>

<tr>
<td>Lemon Pie</td>
<td>Made with the best lemons in the world</td>
<td>11.99</td>
</tr>

<tr>
<td>Cupcakes</td>
<td>Your kids will love these</td>
<td>7.99</td>
</tr>
</table>

<br />
<hr />

<h2>Creating a Test Page</h2>
<p>Follow the instructions below to create a test page for your database:</p>
<p>1. Create a new web page (Open the Files workspace and click &quot;Create a new 
file&quot;).</p>
<p>2. Name the file ListProducts.cshtml.</p>
<p>3. Replace the existing code with the code from the example above.</p>
<p>4. Run your first database web page (Click &quot;Run&quot;) </p>
<br />
<div class="chapter">
<div class="prev"><a class="chapter" href="razor_helpers.html">&laquo; Previous</a></div>
<div class="next"><a class="chapter" href="razor_webgrid.html">Next Chapter &raquo;</a></div>
</div>

<p>From <b>http://www.w3schools.com</b> (Copyright Refsnes Data)</p>
</body>
<!-- Mirrored from www.w3schools.com/razor/razor_database.asp?output=print by HTTrack Website Copier/3.x [XR&CO'2010], Sat, 15 Oct 2011 23:33:28 GMT -->
</html>